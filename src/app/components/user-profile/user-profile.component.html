<div class="w-full rounded-md shadow-sm bg-white mb-4">
  <div class="py-5 md:py-7 px-4 md:px-16">
    <div class="text-2xl md:text-4xl font-normal p-1 md:p-5">
      {{ 'user-profile' | translate }}
    </div>
  </div>
</div>
<app-white-box>
  <div class="flex flex-row justify-between">
    <div>
      <div class="flex justify-center md:justify-start text-xl md:text-2xl font-medium mb-2">{{ 'profile-label' |
        translate }}</div>
      <div class="flex flex-col justify-center">
        <div class="flex flex-row gap-2">
          <div class="text-base md:text-lg font-medium">Email:</div>
          <div class="text-base md:text-lg">{{userDetails.email}}</div>
        </div>
        <div class="flex flex-row gap-2">
          <div class="text-base md:text-lg font-medium">{{ 'gr-number' | translate }}</div>
          <div class="flex">
            <div class="text-base md:text-lg">{{userDetails.groupNumber}}</div>
          </div>
        </div>
        <div class="flex flex-row gap-2">
          <div class="text-base md:text-lg font-medium">Role:</div>
          <div class="text-base md:text-lg">{{userDetails.role}}</div>
        </div>
      </div>
      <div class="flex justify-start mt-4">
        <div (click)="onHistory()" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded select-none
              focus:outline-none focus:shadow-outline w-full lg:w-72 text-center cursor-pointer">
          {{'view-history' | translate}}
        </div>
      </div>
    </div>
    <div class="hidden md:flex md:flex-col" *ngIf="lastGame" skeleton-block >
      <div class="flex flex-col p-2 rounded-lg bg-gray-100 border" >
        <div class="flex justify-center text-xl ">
          Last Test Result
        </div>
        <div class="flex flex-col rounded-md">
          <div  class="flex text-base font-medium skeleton skeleton-text" >Start Time: {{ (lastGame[lastGame.length - 1].startTime | date:'dd/MM/yyyy HH:mm:ss') }}</div>
          <div class="flex text-base font-medium skeleton skeleton-text" >End Time: {{ (lastGame[lastGame.length-1].endTime | date:'dd/MM/yyyy HH:mm:ss') }}</div>
          <div class="flex text-base font-medium skeleton skeleton-text" >Test Duration: {{ lastGame[lastGame.length-1].testDuration }}min</div>
          <div class="flex text-base font-medium skeleton skeleton-text">Score: {{ lastGame[lastGame.length-1].score * 5 }}%</div>
        </div>
      </div>
    </div>
  </div>
</app-white-box>
<!-- Change Password Form -->
<div class="mt-4"></div>
<app-white-box>
  <div class="flex flex-col gap-2">
    <div class="flex justify-start text-xl md:text-3xl font-medium ">{{ 'change-password' | translate }}</div>
    <form class="flex flex-col gap-2" [formGroup]="passwordForm">
      <div class="flex flex-col gap-2">
        <label for="current-password" class="w-full md:w-1/3 text-lg font-medium">{{ 'current' | translate }}</label>
        <div>
          <input id="current-password" type="password" formControlName="currentPassword"
            class="appearance-none border rounded w-full lg:w-1/2 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            placeholder="Enter current password" required>
        </div>
        <app-error-message [invalidPassword]="invalidPassword"></app-error-message>
        <label for="new-password" class="w-full md:w-1/3 text-lg font-medium">{{ 'new-pass' | translate }}</label>
        <div>
          <div>
            <input id="new-password" type="password" formControlName="newPassword"
              class="appearance-none border rounded w-full lg:w-1/2 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              placeholder="Enter new password" required>
          </div>
          <app-error-message *ngIf="formSubmitAttempt" [isInvalidPassword]="isFieldInvalid('newPassword')">
          </app-error-message>
        </div>
        <label for="confirm-password" class="w-full md:w-1/3 text-lg font-medium">{{ 'confirm-pass' | translate
          }}</label>
        <div>
          <div>
            <input id="confirm-password" formControlName="confirmPassword" type="password"
              class="appearance-none border rounded w-full lg:w-1/2 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              placeholder="Confirm new password" required>
          </div>
          <div *ngIf="passwordForm.hasError('passwordMismatch') && passwordForm.get('confirmPassword').value !== ''">
            <app-error-message *ngIf="formSubmitAttempt" [passwordMissMatch]="true"></app-error-message>
          </div>
          <app-error-message *ngIf="formSubmitAttempt"
            [isInvalidConfirmPassword]="isFieldInvalid('confirmPassword')"></app-error-message>
        </div>
      </div>
      <div class="flex flex-col mt-2">
        <div class="text-xs text-gray-500 select-text">{{ 'recommendation' | translate }}</div>
        <div class="flex">
          <div (click)="changePassword()" class="bg-gray-500 mt-1 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded select-none
                focus:outline-none focus:shadow-outline w-full lg:w-52 text-center cursor-pointer">
            {{ 'change-pass' | translate }}
          </div>
        </div>
      </div>
    </form>
  </div>
</app-white-box>
<notifier-container></notifier-container>